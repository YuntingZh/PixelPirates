<!DOCTYPE html>
<html>

<head>
    <title>Pixel Pirates - Final Project Proposal</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container">
        <h1><a href="https://cs184.eecs.berkeley.edu/sp24/docs/final-project" target="_blank">Final Project Proposal</a>
        </h1>
        <p><strong>Project Title:</strong> The Mystic Sea: An Interactive Particle Simulation</p>
        <p>
            <img src="Images/Idea.jpg" alt="Project Demonstration Image"
                style="width:100%;max-width:600px;height:auto;">
            <br>
            <small>Image source: <a href="https://wall.alphacoders.com/big.php?i=1314310" target="_blank">Alpha
                    Coders</a></small>
        </p>

        <p> <strong>Summary:</strong> Centered on advancing particle simulation within a computer graphics framework,
            our project aims to craft a technically sophisticated scene. We plan to feature fluid dynamics and shader
            effects to simulate water, fog, and smoke. Additionally, we hope to delve into animation and interactive
            elements, including a dynamically moving sea monster and boat. While excited about incorporating
            storytelling elements, our primary focus lies in overcoming technical challenges and fostering innovations,
            especially in fluid simulation and shader development, to achieve both realism and striking visual appeal.
        </p>

        <p><strong>Team Members:</strong> Jiahui Zhang, Yuan Xu, Yunting Zhao, Zoe Zhou</p>

        <h2>Problem Description</h2>
        <p><strong>Problem Description:</strong> Our project confronts two primary challenges within the realm of
            computer graphics and particle simulation. Firstly, we aim to explore the complex interaction between water
            and wind, focusing on how these dynamics influence and collide with objects within the sea environment,
            specifically a sea monster and a boat. This involves developing a robust simulation that can accurately
            model fluid dynamics and physical interactions. Secondly, we seek to innovate in the area of animation
            tracking. We will be performing Inverse Fast Fourier Transform and the result will be heightmap. Our goal is
            to create a seamless and intuitive animation track for the camera movement that
            harmoniously interacts with the independent animations of the objects in the scene, including the sea
            monster and the boat. These challenges are significant as they require a deep understanding of physics-based
            simulation and animation principles, pushing the boundaries of realism and interactivity in computer
            graphics.</p>

        <h2>Goals and Deliverables</h2>
        <p>
            Our project aims to create an interactive and visually captivating scene through advanced particle
            simulations, focusing primarily on fluid dynamics.
            <br>
            <strong>Baseline Deliverables:</strong>
        <ul>
            <li>Creation of a realistic fluid simulation representing the sea.</li>
            <li>Implementation of a fixed camera perspective.</li>
            <li>Inclusion of a static object that interacts with the fluid simulation to demonstrate collision and fluid
                dynamics.</li>
            <li>Development of a basic cloth simulation to represent sail interaction with wind, demonstrating the
                effects of wind on flexible materials.</li>
        </ul>

        <strong>Aspirational Deliverables:</strong>
        <ul>
            <li>Introduction of a moving sea monster, adding complexity and interaction with the water.</li>
            <li>Integration of a moving boat, showcasing dynamic interaction with the fluid environment.</li>
            <li>Development of dynamic camera movements to enhance storytelling and visual engagement.</li>
            <li>Exploration and implementation of advanced shaders for added realism, including techniques like bump
                mapping and enhanced lighting effects.</li>
        </ul>

        <strong>Success Metrics:</strong>
        <ul>
            <li>Effective implementation of fog and smoke simulations, enhancing the scene's atmospheric depth.</li>
            <li>High-quality visual effects achieved through advanced shaders, bump mapping, and lighting, contributing
                to the scene’s realism.</li>
            <li>User feedback and technical assessment of the immersive quality, realism, and performance of the final
                scene.</li>
        </ul>
        </p>



        <h2>Schedule</h2>
        <div class="schedule">
            <p>
                Our project schedule is structured to align with the key milestones and deadlines:
                <br>
                <strong>Week 1 (April 1th - April 7th):</strong>
            <ul>
                <li>Project kickoff and initial planning.</li>
                <li>Begin development of fluid simulation for sea.</li>
                <li>Set up fixed camera perspective.</li>
            </ul>

            <strong>Week 2 (April 9th - April 14th):</strong>
            <ul>
                <li>Continue development of fluid simulation.</li>
                <li>Introduce a static object to interact with the fluid.</li>
                <li>Prepare and submit the Graded Milestone report.</li>
            </ul>

            <strong>Week 3 (April 15th - April 21rd):</strong>
            <ul>
                <li>Review and incorporate feedback from Milestone.</li>
                <li>Further refine the fluid simulation and static object interaction.</li>
                <li>Start work on fog and smoke simulations (if time permits).</li>
            </ul>

            <strong>Week 4 (April 22th - April 28th):</strong>
            <ul>
                <li>Begin aspirational goals if baseline deliverables are met.</li>
                <li>Implement dynamic elements: moving sea monster and boat (if baseline completed).</li>
                <li>Explore advanced shader techniques (if baseline completed).</li>
                <li>Finalize the Final Deliverables.</li>
            </ul>
            <strong>Final submission day (April 29th - April 30th):</strong>
            <ul>
                <li>Final meeting</li>
                <li>Submit Final Deliverables (Report & Video).</li>
            </ul>

            <strong>Presentation day (May 1st - May 3rd):</strong>
            <ul>
                <li>Prepare for final presentations.</li>
                <li>Final Presentations on May 2nd and 3rd.</li>
            </ul>
            </p>
        </div>

        <!-- <h2>Meeting Summary</h2>
        <p><strong>Week 0 Meeting Summary (As of April 1st):</strong></p>
        <ul>
            <li><strong>Week Expectation:</strong> Efficiently familiarize with Unreal Engine, clearly define roles and
                responsibilities, and initiate core aspects of the project, setting a strong foundation for future
                development.</li>
        </ul> -->

        <div>
            <h2>Week 1 Task Allocation</h2>
            <table border="1">
                <tr>
                    <th>Zoe's Tasks</th>
                    <th>Jiahui's Tasks</th>
                    <th>Yuan's Tasks</th>
                    <th>Yunting's Tasks</th>
                    <th>Team Tasks</th>
                </tr>
                <tr>
                    <td>
                        <ul>
                            <li>Explore water simulation in Unreal Engine</li>
                            <li>Learn about fluid simulation</li>
                        </ul>
                    </td>
                    <td>
                        <ul>
                            <li>Research camera aspects</li>
                        </ul>
                    </td>
                    <td>
                        <ul>
                            <li>Understand wind and sail interaction with Yunting</li>
                        </ul>
                    </td>
                    <td>
                        <ul>
                            <li>Prepare project models</li>
                            <li>Collaborate on sail and wind research with Yuan</li>
                        </ul>
                    </td>
                    <td>
                        <ul>
                            <li>Get familiar with Unreal Engine</li>
                            <li>Hold a team meeting on Monday at 1 PM</li>
                            <li>Consult with the professor about Blueprint and extra credits</li>
                            <li>Research collision and buoyancy features</li>
                        </ul>
                    </td>
                </tr>
            </table>
        </div>
        <div>
            <h2>Week 2 Task Allocation</h2>
            <table border="1">
                <tr>
                    <th>Zoe's Tasks</th>
                    <th>Jiahui's Tasks</th>
                    <th>Yuan's Tasks</th>
                    <th>Yunting's Tasks</th>
                    <th>Team Tasks</th>
                </tr>
                <tr>
                    <td>
                        <ul>
                            <li>Understanding inverse Fourier transformation</li>
                            <li>Learning the Niagara system in Unreal Engine 5</li>
                        </ul>
                    </td>
                    <td>
                        <ul>
                            <li>Fix the buoyancy calculations</li>
                        </ul>
                    </td>
                    <td>
                        <ul>
                            <li>Exploring HLSL and texture properties</li>
                        </ul>
                    </td>
                    <td>
                        <ul>
                            <li>Creating material for models</li>
                            <li>Baking textures</li>
                        </ul>
                    </td>
                    <td>
                        <ul>
                            <li>Complete milestone</li>
                        </ul>
                    </td>
                </tr>
            </table>
        </div>
        <div class="image-row">
            <figure>
                <img src="Images/boat.png" alt="boat" style="width:100%;max-width:600px;height:auto;">
                <figcaption>Boat Model.</figcaption>
            </figure>
            <figure>
                <img src="Images/monster.png" alt="monster" style="width:100%;max-width:600px;height:auto;">
                <figcaption>Sea Monster Model.</figcaption>
            </figure>
        </div>
        <div>
            <h2>Week 3 Task Allocation</h2>
            <table border="1">
                <tr>
                    <th>Zoe's Tasks</th>
                    <th>Jiahui's Tasks</th>
                    <th>Yuan's Tasks</th>
                    <th>Yunting's Tasks</th>
                    <th>Team Tasks</th>
                </tr>
                <tr>
                    <td>
                        <ul>
                            <li>Finishing up water simulation</li>
                            <li>Prepare the final presentation slides</li>
                        </ul>
                    </td>
                    <td>
                        <ul>
                            <li>Working with Zoe on the water simulation</li>
                            <li>Working on camera track implementation</li>
                        </ul>
                    </td>
                    <td>
                        <ul>
                            <li>Implement FLIP model for fluid dynamics</li>
                            <li>Start writing the final report</li>
                        </ul>
                    </td>
                    <td>
                        <ul>
                            <li>Learning the FLIP model and work on final paper</li>
                            <li>Modify the lighting settings</li>
                        </ul>
                    </td>
                    <td>
                        <ul>
                            <li>Pivot and also improve based on milestone feedback</li>

                        </ul>
                    </td>
                </tr>
            </table>
        </div>
        <div>
            <img src="Images/Flip in ue5.png" alt=" FLIP model " style="width:100%;max-width:1200px;height:auto;">
            <figcaption>Flip Model in ue5</figcaption>
        </div>
        <div>
            <h2>Week 4 Task Allocation</h2>
            <table border="1">
                <tr>
                    <th>Zoe's Tasks</th>
                    <th>Jiahui's Tasks</th>
                    <th>Yuan's Tasks</th>
                    <th>Yunting's Tasks</th>
                    <th>Team Tasks</th>
                </tr>
                <tr>
                    <td>
                        <ul>
                            <li>Moving objects in the scene using spline animation</li>
                            <li>Edit the video for presentation</li>
                        </ul>
                    </td>
                    <td>
                        <ul>
                            <li>Integrate the whole scene</li>
                            <li>Implement the sound system</li>
                            <li>Edit the video for presentation</li>
                        </ul>
                    </td>
                    <td>
                        <ul>
                            <li>Combining the water simulation and FLIP model</li>
                            <li>Prepare the final deliverable</li>
                        </ul>
                    </td>
                    <td>
                        <ul>
                            <li>Add fog and other small details</li>
                            <li>Finishing the website write-up</li>
                        </ul>
                    </td>
                    <td>
                        <ul>
                            <li>Finalize the Final Deliverables</li>
                        </ul>
                    </td>
                </tr>
            </table>
        </div>


        <div class="feedback-and-response">
            <p class="feedback-and-response-header">Response to Feedback:</p>
            <p><strong>Feedback from TA - Anjali Thakrar:</strong>Your proposed implementation, deliverables, and
                stretch goals were all very clear. Your timeline looks great and leaves plenty of room for implementing
                extra features or fixing unexpected bugs. I really like this idea and think it will lead to really
                exciting and dramatic sea renderings.</p>
            <p>A couple thoughts:</p>
            <p>Success metrics:<br>
                I appreciate that you included these metrics! It’s incredibly important to map out prior to
                implementation in order to have a shared, clear idea of your end product.</p>
            <p>One of your success metrics is “Effective implementation of fog and smoke simulations, enhancing the
                scene's atmospheric depth.” <span style="color: #01579b;">(It is a visual metric and we are planning to
                    learn and simulate it. This is our aspirational goal, lower priority than finishing the basic scene
                    setup, which is the water simulation.)</span></p>
            <p>You also mention user feedback. How do you plan to get this feedback? Will that be an internal
                qualitative metric for your team, or will you be using this for an in-depth analysis of your rendering
                quality?</p>
            <p>How do you plan to model your fluid simulation? Some popular frameworks are FLIP, MPM, PIC, and SPH, but
                you’re welcome to use anything that excites you!</p>
            <p>What’s your starting point? Will you be building this from scratch, extending a class HW, or adding to an
                existing codebase? <span style="color: #01579b;">(Our initial plan is to use Unreal and learn the fluid
                    simulation part of it. We won't be starting from scratch because there is already a full-fledged
                    simulator in Unreal, but we want to build our own ocean in it using graphic script to simulate very
                    realistic effects and interactivity!)</span></p>
        </div>

        <div>
            <li><a href="https://drive.google.com/file/d/1SgY_nfHOZyPodGyJsK47_97nT_ZyF8T_/view?usp=drive_link"
                    target="_blank">Milestone Video</a></li>
            <li><a href="https://docs.google.com/presentation/d/1f0Psp4JfDUNLo2Qw36Vvs7cDZETvOLbnqAmoC-kuhc8/edit?usp=sharing"
                    target="_blank">Milestone Presentation</a></li>
            <li><a href="https://publuu.com/flip-book/471243/1059449/page/2" target="_blank">Milestone Status Report</a>
            </li>
        </div>
        <div class="feedback-and-response">
            <p class="feedback-and-response-header">Milestone feedback</p>
            <p>

                Great work on your milestone deliverables for the Pixel Pirates. Your visuals are very exciting and
                dramatic. I suggest adding audio to your next video presentation. I also suggest that you are crisply
                showing what you started with, and what you built yourselves. For example, did you create the models
                from scratch, or find them online? Is the ocean simulator used from Unreal out-of-the-box, or are you
                making any modifications? How does the boat interact with the water? I recommend more actively
                distilling out the conclusions of what you learned and presenting these explicitly -- up front,
                developed throughout the talk, and reiterated at the end. I also encourage you to incorporate increased
                technical complexity - this may be creating new shaders or more complex simulation schemes. Excited to
                see what you build for your final demo!
            </p>
        </div>
        <div>
            <h2>Techniques Explanation</h2>
            <div>
                <img src="Images/mindmap.jpg" alt="Mind Map" style="width:100%;max-width:1200px;height:auto;">
                <figcaption>Mind Map of Ocean Simulation</figcaption>
            </div>
            <p>
                <strong>Wave Simulation:</strong> We use FFT-based method to simulate waves by generating (angular) frequencies and
                amplitudes and transforming these parameters into discrete point values with Inverse Fast Fourier Transform. To simulate
                the height space (2D space), we need to apply Row Pass and Column Pass (IFFT applied to rows and columns) for 2D Inverse
                FFT. Then, we can use bilinear interpolation to get the continuous point values in 2D height space. At last, we add
                a displacement shader upon the height field to simulate the sharp crease of waves. 
            </p>
            <p>
                <strong>Buoyancy:</strong> We try to compute the buoyancy (forces) by sampling. We take 12 samples from points beneath 
                the boat model and use the normal vector of the wave as the force direction at the sample points. The normal vectors 
                can be found in displacement shader after Inverse Fast Fourier Transform. 
            </p>
            <p>
                <strong>Collision:</strong> Ocean surface (waves) simulated by plane meshes (as we talked above) often meet such 
                "Water-in-Boat" problem: EITHER the wave plane cut into the model with concave surface (looks like water has come 
                into the boat) OR the model must be completely upon the wave surface. To solve this problem, we can simulate the actual
                collision of the fluid with particle models (e.g. FLIP model). But it is inefficient since too many particles are 
                created for the large amount of cells in the 3D space since ocean often has large surface area and significant depth. 
                Our solution is to simulate the ocean around the collision objects with FLIP model and try to blend the result with 
                the ocean surface simulated by FFT-based wave model. One is inefficient but more accurate, the other is efficient 
                but inaccurate. So, a trade-off between these two models is good deal in ocean simulation. 
            </p>
            <p>
                <strong>Animation and Camera:</strong> Animation can be simulated by setting control points (6 dimensional information, 
                including the 3D position and direction), and then deriving the curve by spline interpolation (e.g. Bezier curves from 
                de Casteljau Algorithm). 
            </p>
            <div class="image-row">
                <figure>
                    <img src="Images/vortex.png" alt="Vortex" style="width:100%;max-width:600px;height:auto;">
                    <figcaption>Vortex on Ocean Surface.</figcaption>
                </figure>
                <figure>
                    <img src="Images/result.jpg" alt="Final Image" style="width:100%;max-width:600px;height:auto;">
                    <figcaption>Final Image.</figcaption>
                </figure>
            </div>
            </div>
        <div>
            <h2>Problems Encountered in Implementation</h2>
            <p>
                We initially chose to simulate a realistic ocean within Unreal Engine because we knew that it could
                produce very realistic and visually appealing ocean effects. However, our team underestimated the time
                required for this project. We spent a significant amount of time understanding how Unreal Engine
                operates and the Niagara system. Ultimately, this effort did yield good real-time rendering results.
                During our study of Unreal Engine, we also encountered creative challenges related to the project.

                For the implementation of the ocean, we referred to numerous online tutorials. We explored the Niagara
                3D grid flip pool feature within Unreal Engine, which allowed us to set up fluid surfaces by adding our
                own velocities and forces. Midway through the project, we experienced heightened anxiety, questioning
                whether we had chosen the right framework initially, as a considerable amount of time was spent watching
                tutorial videos and grappling with issues related to understanding Unreal, project builds, and computer
                crashes. We felt that this time could have been better spent exploring more meaningful fluid dynamics
                issues.

                Nevertheless, we ultimately decided to continue our project using both FFT-based wave simulation and
                FLIP fluid model,
                as it allowed us to more easily complete other simulation components and achieve better visual support.
                Many of the
                ocean tutorials we found did not conform to physical realities; they simply simulated the motion of the
                waves based on their appearance. We aimed to model the true fluid dynamics of the ocean, taking into
                account forces such as buoyancy, gravity, and wind.

                In the end, we modified the buoyancy calculations ourselves. By comparing the before and after, we now
                can take into account the density of small boats to achieve a more realistic simulation of ocean surface
                motion.

            </p>
            <h2>Lessons Learned</h2>
            <p>
                For our team, learning about how to calculate buoyancy and the interaction of objects was quite
                interesting. We also enjoyed exploring the aspects of materials and realized that to ultimately produce
                visually appealing images/videos, many factors need to be considered and much planning is required. Game
                engines require a lot of time to master and understand; they can deliver excellent final results but
                also limit our ability to think and innovate as many features are already pre-existing. During the
                project, we had many small but interesting discussions related to game engine and CG. For instance,
                while working on the boat model, we explored options for convex and concave colliders and understood why
                game engines do not offer concave as the default option. These minor explorations and learning
                experiences definitely deepened our overall understanding of computer graphics. Overall, we thoroughly
                enjoyed our project in the last four weeks and had a great time working together.
            </p>
            <h2>Demo Preview</h2>

            <!-- <img src="Images/baseline.gif" alt="video " style="width:100%;max-width:800px;height:auto;">          -->
            <div class="video-container">
                <!-- First video and caption -->
                <figure>
                    <video width="320" height="240" controls>
                        <source src="Images/newdemo_screen capture.mp4" type="video/mp4">
                        Your browser does not support the video tag.
                    </video>
                    <figcaption>This is a process making video</figcaption>
                </figure>
            
                <!-- Second video and caption -->
                <figure>
                    <video width="320" height="240" controls>
                        <source src="Images/final-demo-short video.mp4" type="video/mp4">
                        Your browser does not support the video tag.
                    </video>
                    <figcaption>This is our final video with Yuan's voice over</figcaption>
                </figure>
            </div>
            


        </div>
        <div class="resources">
            <h2>Resources</h2>


            <p>Learn how to write a FLIP water / fluid simulation</p>
            <li><a href="http://obrien.berkeley.edu/Classes/CS284B/Spring23/05-fluid-simulation.pdf"
                    target="_blank">Fluid Simulation</a></li>
            <li><a href="https://www.youtube.com/watch?v=XmzBREkK8kY"
                    target="_blank">https://www.youtube.com/watch?v=XmzBREkK8kY</a></li>
            <li><a href="https://matthias-research.github.io/pages/tenMinutePhysics/18-flip.pdf"
                    target="_blank">https://matthias-research.github.io/pages/tenMinutePhysics/18-flip.pdf</a></li>
            <li><a href="https://www.youtube.com/watch?v=1pISJAPjDS4"
                    target="_blank">https://www.youtube.com/watch?v=1pISJAPjDS4</a></li>
            <p>Learn how to write a FLIP water / fluid simulation:</p>
            <li><a href="https://www.youtube.com/watch?v=XmzBREkK8kY"
                    target="_blank">https://www.youtube.com/watch?v=XmzBREkK8kY</a></li>
            <li><a href="https://matthias-research.github.io/pages/tenMinutePhysics/18-flip.pdf"
                    target="_blank">https://matthias-research.github.io/pages/tenMinutePhysics/18-flip.pdf</a></li>
            <li><a href="https://www.youtube.com/watch?v=1pISJAPjDS4"
                    target="_blank">https://www.youtube.com/watch?v=1pISJAPjDS4</a></li>

            <p>Animating Wave Motion using Gerstner Waves</p>
            <li><a href="https://80.lv/articles/tutorial-ocean-shader-with-gerstner-waves/"
                    target="_blank">https://80.lv/articles/tutorial-ocean-shader-with-gerstner-waves/</a></li>
            <li><a href="https://web.engr.oregonstate.edu/~mjb/cs557/Handouts/WaveMotion.6pp.pdf"
                    target="_blank">https://web.engr.oregonstate.edu/~mjb/cs557/Handouts/WaveMotion.6pp.pdf</a></li>

            <p>Wooden Texture (Extended Application of Musgrave Texture)</p>
            <li><a href="https://www.youtube.com/watch?v=j7pGqP-QZeQ"
                    target="_blank">https://www.youtube.com/watch?v=j7pGqP-QZeQ</a></li>
            <li><a href="https://docs.blender.org/manual/en/latest/render/materials/legacy_textures/types/musgrave.html"
                    target="_blank">https://docs.blender.org/manual/en/latest/render/materials/legacy_textures/types/musgrave.html</a>
            </li>

            <p>Musgrave Texture was actually removed from Blender roughly a few months ago in Blender 4.1, but we
                were using Blender 3.1.</p>
            <li><a href="https://docs.blender.org/manual/en/latest/modeling/geometry_nodes/texture/musgrave.html"
                    target="_blank">https://docs.blender.org/manual/en/latest/modeling/geometry_nodes/texture/musgrave.html</a>
            </li>
            <li><a href="https://www.youtube.com/watch?v=2Z75X_Jg8JQ"
                    target="_blank">https://www.youtube.com/watch?v=2Z75X_Jg8JQ</a></li>

            <p>Water simulation:</p>
            <li><a href="https://people.computing.clemson.edu/~jtessen/reports/papers_files/coursenotes2004.pdf"
                    target="_blank">https://people.computing.clemson.edu/~jtessen/reports/papers_files/coursenotes2004.pdf</a>
            </li>
        </div>



        <div>
            <h2 class="Contributions">Contributions</h2>
            <li>Jiahui Zhang: Buoyancy calculation, camera motion design</li>
            <li>Yinuo Zhou: Water flow simulation, HLSL updates for dynamic water materials</li>
            <li>Yuan Xu: Force field calculation, animation, constructing FLIP water in Unreal Engine</li>
            <li>Yunting Zhao: Building models, material research, constructing FLIP water in Unreal Engine</li>
        </div>


    </div>
</body>

</html>
